<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Crear Art√≠culo Infernal</title>
  <link href="https://fonts.googleapis.com/css2?family=UnifrakturCook:wght@700&display=swap" rel="stylesheet">
  <script src="verificarid.js"></script>
  <style>
body {
  position: relative;
  background: radial-gradient(circle at center, #000000 0%, #1a0000 60%, #0a0000 100%);
  color: #ff5555;
  font-family: 'UnifrakturCook', cursive;
  margin: 0;
  padding: 40px;
  min-height: 100vh;
  overflow: hidden;
  transition: background 2s ease-in-out;
}

/* Fondo animado con s√≠mbolos cayendo */
body::before {
  content: "‚Ä† ‚ò† ‚ò£ ‚òØ ‚úù ‚úû ‚ö∞ ‚ò¢ ‚ô∞ ‚ò† ‚ò£ ‚òØ ‚úù ‚úû ‚ö∞ ‚ò¢ ‚ô∞ ‚ò† ‚ò£ ‚òØ";
  position: absolute;
  top: -200%;
  left: 0;
  width: 100%;
  height: 400%;
  font-size: 2em;
  color: rgba(255, 50, 50, 0.08);
  line-height: 1.5;
  white-space: pre;
  pointer-events: none;
  animation: symbolsRain 30s linear infinite;
  z-index: 0;
  filter: blur(0.5px);
}

/* Oscurece el fondo por encima de los s√≠mbolos */
body::after {
  content: "";
  position: absolute;
  inset: 0;
  background: radial-gradient(circle at center, rgba(0, 0, 0, 0.6) 0%, rgba(10, 0, 0, 0.95) 100%);
  z-index: 1;
  pointer-events: none;
  backdrop-filter: blur(1px);
}

/* Todo el contenido real va por encima */
body > * {
  position: relative;
  z-index: 2;
}

@keyframes symbolsRain {
  0% { transform: translateY(0); }
  100% { transform: translateY(100%); }
}

h1 {
  text-align: center;
  text-shadow: 0 0 10px crimson, 0 0 25px red, 2px 2px 5px black;
  font-size: 3em;
  margin-bottom: 30px;
  animation: glow-pulse 2.5s ease-in-out infinite;
  letter-spacing: 2px;
  transition: text-shadow 0.3s;
}

@keyframes glow-pulse {
  0%, 100% {
    text-shadow: 0 0 10px crimson, 0 0 25px red, 2px 2px 5px black;
  }
  50% {
    text-shadow: 0 0 30px crimson, 0 0 60px red, 5px 5px 15px black;
  }
}

form {
  max-width: 650px;
  margin: auto;
  background: linear-gradient(145deg, #1a0000, #0d0000);
  padding: 30px;
  border-radius: 18px;
  box-shadow: 0 0 25px #8b0000, inset 0 0 15px #ff0000;
  display: flex;
  flex-direction: column;
  gap: 25px;
  border: 2px solid #550000;
  backdrop-filter: blur(5px);
  animation: fadeInUp 1.5s ease-out;
  transition: all 0.4s ease;
}

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(50px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

label {
  font-size: 1.3em;
  color: #ff7777;
  text-shadow: 1px 1px 3px black;
  font-family: 'Share Tech Mono', monospace;
}

input[type="text"],
select {
  padding: 12px 15px;
  border: 2px solid #550000;
  border-radius: 8px;
  font-family: 'Share Tech Mono', monospace;
  background-color: #210000;
  color: #ff4444;
  box-shadow: inset 0 0 10px red;
  transition: all 0.3s ease, box-shadow 0.5s ease;
}

input[type="text"]:focus,
select:focus {
  outline: none;
  background-color: #2a0000;
  box-shadow: inset 0 0 16px crimson, 0 0 10px red;
}

.imagen-row {
  display: flex;
  gap: 12px;
  align-items: center;
}

.imagen-row span {
  flex: 1;
  padding: 10px;
  background: #330000;
  border: 1px solid crimson;
  border-radius: 6px;
  color: #ff4444;
  box-shadow: 0 0 5px crimson;
  font-family: 'Share Tech Mono', monospace;
  transition: background 0.3s ease;
}

.imagen-row span:hover {
  background: #440000;
}

.botones {
  display: flex;
  justify-content: space-between;
  gap: 10px;
  flex-wrap: wrap;
}

button {
  flex: 1;
  min-width: 120px;
  padding: 14px 25px;
  background: linear-gradient(135deg, #8b0000, #ff0000);
  border: none;
  color: black;
  font-weight: bold;
  border-radius: 10px;
  cursor: pointer;
  box-shadow: 0 0 15px crimson;
  transition: all 0.3s ease;
  font-family: 'Courier New', monospace;
  text-transform: uppercase;
  letter-spacing: 1.5px;
  animation: buttonFadeIn 1.8s ease-in;
}

@keyframes buttonFadeIn {
  from {
    opacity: 0;
    transform: scale(0.9);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

button:hover {
  background: linear-gradient(135deg, #ff0000, #ff5555);
  box-shadow: 0 0 25px red, 0 0 60px crimson;
  transform: scale(1.08);
  color: #000;
}

#mensajeInfernal {
  margin-top: 25px;
  text-align: center;
  font-size: 1.3em;
  background: #1a0000;
  border: 2px solid crimson;
  padding: 18px;
  border-radius: 15px;
  display: none;
  color: #ff5555;
  box-shadow: 0 0 10px crimson, inset 0 0 10px red;
  animation: inferno-flicker 3s infinite alternate;
  transition: opacity 0.5s ease, transform 0.5s ease;
}

@keyframes inferno-flicker {
  0% {
    box-shadow: 0 0 5px crimson, inset 0 0 5px red;
  }
  100% {
    box-shadow: 0 0 20px crimson, inset 0 0 20px red;
  }
}

  </style>
</head>
<body>
  <h1>ü©∏ Invoca un Nuevo Art√≠culo ü©∏</h1>

<form id="formArticulo">
  <label for="imagenInput">Imagen maldita:</label>
  <div class="imagen-row">
    <button type="button" onclick="document.getElementById('imagenInput').click()">üì∑ Elegir</button>
    <span id="nombreImagen">Ninguna imagen elegida a√∫n...</span>
  </div>
  <input type="file" id="imagenInput" accept="image/*" style="display:none" onchange="actualizarNombreImagen()">

  <label for="nombre">Nombre del objeto:</label>
  <input type="text" id="nombre" placeholder="Ej: Espada Maldita" required>

  <label for="precio">Precio en almas:</label>
  <input type="text" id="precio" placeholder="Ej: 666" required>

  <label for="descripcion">Descripci√≥n del castigo:</label>
  <input type="text" id="descripcion" placeholder="Ej: Corta hasta la voluntad" required>

  <label for="version">Versi√≥n del inframundo:</label>
  <select id="version">
    <option>1.16.5</option>
    <option>1.20.1</option>
  </select>

  <label for="servidor">Servidor de condena:</label>
  <select id="servidor">
    <option>speedrevivalcraft</option>
    <option>311cusocu</option>
    <option>arg113</option>
  </select>

  <div class="botones">
    <button type="button" onclick="guardarArticulo()">üíæ Guardar</button>
    <button type="button" onclick="window.location.href='tienda.html'">‚ùå Cancelar</button>
  </div>
</form>

<div id="mensajeInfernal">‚ö†Ô∏è Aqu√≠ aparecer√°n mensajes del inframundo ‚ö†Ô∏è</div>

  <script>
    verificarID(() => {
      console.log("‚úÖ Verificaci√≥n doble completada");
    });

    function actualizarNombreImagen() {
      const input = document.getElementById('imagenInput');
      const nombre = input.files[0] ? input.files[0].name : 'Selecciona imagen';
      document.getElementById('nombreImagen').textContent = nombre;
    }

    function mostrarMensaje(texto) {
      const msg = document.getElementById("mensajeInfernal");
      msg.textContent = texto;
      msg.style.display = "block";
    }

    function guardarArticulo() {
      const id = sessionStorage.getItem('userId') || 'desconocido';
      const imagen = document.getElementById('imagenInput').files[0];
      const nombre = document.getElementById('nombre').value.trim();
      const precio = document.getElementById('precio').value.trim();
      const descripcion = document.getElementById('descripcion').value.trim();

      if (!imagen || !nombre || !precio || !descripcion) {
        mostrarMensaje("‚ö†Ô∏è Todos los campos deben estar completos.");
        return;
      }

      const version = document.getElementById('version').value;
      const servidor = document.getElementById('servidor').value;

      const formData = new FormData();
      formData.append('imagen', imagen);
      formData.append('nombre', nombre);
      formData.append('precio', precio);
      formData.append('descripcion', descripcion);
      formData.append('version', version);
      formData.append('servidor', servidor);
      formData.append('vendedor', id);

      fetch('/guardar-articulo', {
        method: 'POST',
        body: formData
      })
      .then(res => res.json())
      .then(data => {
        if (data.guardado) {
          window.location.href = 'tienda.html';
        } else {
          mostrarMensaje("‚ùå No se pudo guardar el art√≠culo.");
        }
      })
      .catch(err => {
        console.error("üî• Error infernal al guardar:", err);
        mostrarMensaje("üíÄ Error infernal al guardar el art√≠culo.");
      });
    }
  </script>
</body>
</html>